-- ============================================
-- 시드 데이터 (개발 환경 전용)
-- ⚠️ 반드시 001~004 실행 후 사용
-- ⚠️ prod 환경에서 절대 실행 금지
-- ============================================

-- 1. 테스트 유저 (auth.users → handle_new_user 트리거로 profiles 자동 생성)
insert into auth.users (instance_id, id, aud, role, email, encrypted_password, email_confirmed_at, created_at, updated_at, raw_user_meta_data)
values
  ('00000000-0000-0000-0000-000000000000', 'a1111111-1111-1111-1111-111111111111', 'authenticated', 'authenticated', 'alice@test.com', crypt('test1234', gen_salt('bf')), now(), now(), now(), '{"full_name": "김민지", "avatar_url": ""}'),
  ('00000000-0000-0000-0000-000000000000', 'b2222222-2222-2222-2222-222222222222', 'authenticated', 'authenticated', 'bob@test.com', crypt('test1234', gen_salt('bf')), now(), now(), now(), '{"full_name": "이준호", "avatar_url": ""}'),
  ('00000000-0000-0000-0000-000000000000', 'c3333333-3333-3333-3333-333333333333', 'authenticated', 'authenticated', 'carol@test.com', crypt('test1234', gen_salt('bf')), now(), now(), now(), '{"full_name": "박소연", "avatar_url": ""}'),
  ('00000000-0000-0000-0000-000000000000', 'd4444444-4444-4444-4444-444444444444', 'authenticated', 'authenticated', 'dave@test.com', crypt('test1234', gen_salt('bf')), now(), now(), now(), '{"full_name": "최우진", "avatar_url": ""}'),
  ('00000000-0000-0000-0000-000000000000', 'e5555555-5555-5555-5555-555555555555', 'authenticated', 'authenticated', 'eve@test.com', crypt('test1234', gen_salt('bf')), now(), now(), now(), '{"full_name": "정하늘", "avatar_url": ""}');

-- 2. 맛집 (크몽 사무실 주변 역삼/삼성동 일대)
insert into restaurants (name, category, address, postal_code, lat, lng, naver_place_id, description, kona_card_status, created_by)
values
  ('순남시래기', '음식점>한식', '서울특별시 강남구 테헤란로 330', '06212', 37.5065, 127.0535, 'naver_001', '시래기 된장찌개 맛집, 점심 한정 백반', 'available', 'a1111111-1111-1111-1111-111111111111'),
  ('리장마라탕', '음식점>중식', '서울특별시 강남구 역삼로 180', '06248', 37.5010, 127.0380, 'naver_002', '마라탕 1인 세트가 좋음', 'available', 'b2222222-2222-2222-2222-222222222222'),
  ('스시마이우', '음식점>일식', '서울특별시 강남구 테헤란로 322', '06211', 37.5063, 127.0525, 'naver_003', '런치 오마카세 가성비 좋음', 'unavailable', 'a1111111-1111-1111-1111-111111111111'),
  ('파스타가좋다', '음식점>양식', '서울특별시 강남구 역삼로 172', '06248', 37.5005, 127.0370, 'naver_004', '봉골레 파스타 추천', 'available', 'c3333333-3333-3333-3333-333333333333'),
  ('홍콩반점', '음식점>중식', '서울특별시 강남구 테헤란로 340', '06212', 37.5068, 127.0545, 'naver_005', '짬뽕이 유명한 집', 'unknown', 'd4444444-4444-4444-4444-444444444444'),
  ('김밥천국 역삼점', '음식점>분식', '서울특별시 강남구 역삼로 160', '06248', 37.4998, 127.0365, 'naver_006', '빠르고 저렴한 점심', 'available', 'b2222222-2222-2222-2222-222222222222'),
  ('써브웨이 역삼역점', '음식점>패스트푸드', '서울특별시 강남구 테헤란로 310', '06210', 37.5060, 127.0510, 'naver_007', '샐러드 메뉴도 좋음', 'unavailable', 'e5555555-5555-5555-5555-555555555555'),
  ('본죽 삼성점', '음식점>한식', '서울특별시 강남구 삼성로 100', '06150', 37.5090, 127.0580, 'naver_008', '아플 때 죽 한 그릇', 'unknown', 'c3333333-3333-3333-3333-333333333333'),
  ('토끼정', '음식점>일식', '서울특별시 강남구 테헤란로 350', '06213', 37.5070, 127.0555, 'naver_009', '규동 세트 추천, 웨이팅 있음', 'available', 'a1111111-1111-1111-1111-111111111111'),
  ('이디야 역삼역점', '음식점>카페,디저트', '서울특별시 강남구 역삼로 170', '06248', 37.5003, 127.0368, 'naver_010', '커피 한 잔의 여유', 'available', 'd4444444-4444-4444-4444-444444444444'),
  ('하남돼지집 역삼점', '음식점>한식', '서울특별시 강남구 테헤란로 315', '06210', 37.5062, 127.0515, 'naver_011', '삼겹살 회식 맛집', 'available', 'b2222222-2222-2222-2222-222222222222'),
  ('맥도날드 역삼점', '음식점>패스트푸드', '서울특별시 강남구 역삼로 165', '06248', 37.5000, 127.0367, 'naver_012', '점심 세트 빠르게', 'unavailable', 'e5555555-5555-5555-5555-555555555555'),
  ('오봉집', '음식점>한식', '서울특별시 강남구 테헤란로 360', '06214', 37.5072, 127.0560, 'naver_013', '된장찌개 + 보리밥 조합', 'available', 'c3333333-3333-3333-3333-333333333333'),
  ('모스버거 삼성점', '음식점>패스트푸드', '서울특별시 강남구 삼성로 110', '06150', 37.5092, 127.0585, 'naver_014', '테리야키버거 맛있음', 'unknown', 'a1111111-1111-1111-1111-111111111111'),
  ('미소야 역삼점', '음식점>일식', '서울특별시 강남구 역삼로 175', '06248', 37.5006, 127.0372, 'naver_015', '라멘 맛집, 돈코츠 추천', 'available', 'd4444444-4444-4444-4444-444444444444');

-- 3. 리뷰 (다양한 별점, 일부는 내용 없이 별점만)
insert into reviews (restaurant_id, user_id, rating, content)
values
  -- 순남시래기
  (1, 'b2222222-2222-2222-2222-222222222222', 5, '시래기 된장찌개 진짜 맛있어요! 밥도 맛있고 반찬도 깔끔합니다.'),
  (1, 'c3333333-3333-3333-3333-333333333333', 4, '양도 많고 가성비 좋음'),
  (1, 'd4444444-4444-4444-4444-444444444444', 5, null),
  (1, 'e5555555-5555-5555-5555-555555555555', 4, '점심시간에 웨이팅이 좀 있지만 그만한 가치가 있습니다'),
  -- 리장마라탕
  (2, 'a1111111-1111-1111-1111-111111111111', 4, '마라탕 국물이 진하고 좋아요'),
  (2, 'c3333333-3333-3333-3333-333333333333', 3, '호불호 갈릴 수 있는 맛'),
  (2, 'e5555555-5555-5555-5555-555555555555', 5, null),
  -- 스시마이우
  (3, 'b2222222-2222-2222-2222-222222222222', 5, '런치 오마카세 퀄리티가 이 가격에? 대만족'),
  (3, 'd4444444-4444-4444-4444-444444444444', 4, '신선하고 좋았어요'),
  (3, 'e5555555-5555-5555-5555-555555555555', 5, '코나카드 안 되는 게 아쉽지만 맛은 최고'),
  -- 파스타가좋다
  (4, 'a1111111-1111-1111-1111-111111111111', 4, null),
  (4, 'b2222222-2222-2222-2222-222222222222', 3, '봉골레는 괜찮은데 로제는 별로'),
  (4, 'd4444444-4444-4444-4444-444444444444', 4, '분위기도 좋고 맛도 좋아요'),
  -- 홍콩반점
  (5, 'a1111111-1111-1111-1111-111111111111', 3, '짬뽕은 맛있는데 짜장은 그저 그래요'),
  (5, 'c3333333-3333-3333-3333-333333333333', 4, null),
  -- 김밥천국
  (6, 'a1111111-1111-1111-1111-111111111111', 3, '급할 때 가기 좋음'),
  (6, 'd4444444-4444-4444-4444-444444444444', 2, '위생이 좀...'),
  (6, 'e5555555-5555-5555-5555-555555555555', 3, null),
  -- 토끼정
  (9, 'b2222222-2222-2222-2222-222222222222', 5, '규동이 정말 맛있어요. 웨이팅 감수할 가치 있음!'),
  (9, 'c3333333-3333-3333-3333-333333333333', 4, '카레우동도 추천합니다'),
  (9, 'd4444444-4444-4444-4444-444444444444', 5, null),
  (9, 'e5555555-5555-5555-5555-555555555555', 4, '점심시간 피해서 가세요'),
  -- 하남돼지집
  (11, 'a1111111-1111-1111-1111-111111111111', 5, '회식 장소로 최고! 삼겹살 퀄리티 좋습니다'),
  (11, 'c3333333-3333-3333-3333-333333333333', 4, '고기 두께가 좋아요'),
  (11, 'e5555555-5555-5555-5555-555555555555', 5, null),
  -- 오봉집
  (13, 'b2222222-2222-2222-2222-222222222222', 4, '된장찌개가 집밥 느낌이라 좋아요'),
  (13, 'd4444444-4444-4444-4444-444444444444', 4, null),
  -- 미소야
  (15, 'a1111111-1111-1111-1111-111111111111', 4, '돈코츠 라멘 국물이 진해서 좋아요'),
  (15, 'b2222222-2222-2222-2222-222222222222', 5, '챠슈가 정말 부드럽습니다'),
  (15, 'c3333333-3333-3333-3333-333333333333', 3, '웨이팅이 너무 길어요');

-- 4. 좋아요/싫어요 (트리거가 like_count, dislike_count 자동 갱신)
insert into reactions (restaurant_id, user_id, type)
values
  -- 순남시래기: 좋아요 4
  (1, 'a1111111-1111-1111-1111-111111111111', 'like'),
  (1, 'b2222222-2222-2222-2222-222222222222', 'like'),
  (1, 'c3333333-3333-3333-3333-333333333333', 'like'),
  (1, 'd4444444-4444-4444-4444-444444444444', 'like'),
  -- 리장마라탕: 좋아요 2, 싫어요 1
  (2, 'a1111111-1111-1111-1111-111111111111', 'like'),
  (2, 'c3333333-3333-3333-3333-333333333333', 'like'),
  (2, 'd4444444-4444-4444-4444-444444444444', 'dislike'),
  -- 스시마이우: 좋아요 3
  (3, 'a1111111-1111-1111-1111-111111111111', 'like'),
  (3, 'b2222222-2222-2222-2222-222222222222', 'like'),
  (3, 'e5555555-5555-5555-5555-555555555555', 'like'),
  -- 파스타가좋다: 좋아요 2
  (4, 'a1111111-1111-1111-1111-111111111111', 'like'),
  (4, 'c3333333-3333-3333-3333-333333333333', 'like'),
  -- 홍콩반점: 좋아요 1, 싫어요 2
  (5, 'c3333333-3333-3333-3333-333333333333', 'like'),
  (5, 'b2222222-2222-2222-2222-222222222222', 'dislike'),
  (5, 'e5555555-5555-5555-5555-555555555555', 'dislike'),
  -- 김밥천국: 싫어요 2
  (6, 'b2222222-2222-2222-2222-222222222222', 'dislike'),
  (6, 'c3333333-3333-3333-3333-333333333333', 'dislike'),
  -- 토끼정: 좋아요 5 (인기 맛집)
  (9, 'a1111111-1111-1111-1111-111111111111', 'like'),
  (9, 'b2222222-2222-2222-2222-222222222222', 'like'),
  (9, 'c3333333-3333-3333-3333-333333333333', 'like'),
  (9, 'd4444444-4444-4444-4444-444444444444', 'like'),
  (9, 'e5555555-5555-5555-5555-555555555555', 'like'),
  -- 하남돼지집: 좋아요 3
  (11, 'a1111111-1111-1111-1111-111111111111', 'like'),
  (11, 'b2222222-2222-2222-2222-222222222222', 'like'),
  (11, 'd4444444-4444-4444-4444-444444444444', 'like'),
  -- 미소야: 좋아요 3, 싫어요 1
  (15, 'a1111111-1111-1111-1111-111111111111', 'like'),
  (15, 'b2222222-2222-2222-2222-222222222222', 'like'),
  (15, 'd4444444-4444-4444-4444-444444444444', 'like'),
  (15, 'e5555555-5555-5555-5555-555555555555', 'dislike');

-- 5. 코나카드 투표 (트리거가 임계값 초과 시 상태 자동 변경)
insert into kona_card_votes (restaurant_id, user_id, vote)
values
  -- 순남시래기: available 4표 → 자동으로 available 확정
  (1, 'b2222222-2222-2222-2222-222222222222', 'available'),
  (1, 'c3333333-3333-3333-3333-333333333333', 'available'),
  (1, 'd4444444-4444-4444-4444-444444444444', 'available'),
  (1, 'e5555555-5555-5555-5555-555555555555', 'available'),
  -- 스시마이우: unavailable 3표 → 자동으로 unavailable 확정
  (3, 'a1111111-1111-1111-1111-111111111111', 'unavailable'),
  (3, 'c3333333-3333-3333-3333-333333333333', 'unavailable'),
  (3, 'd4444444-4444-4444-4444-444444444444', 'unavailable'),
  -- 홍콩반점: available 1, unavailable 1 → 임계값 미달, 상태 유지
  (5, 'a1111111-1111-1111-1111-111111111111', 'available'),
  (5, 'b2222222-2222-2222-2222-222222222222', 'unavailable');

-- 6. 코나카드 사용가능 우편번호 샘플 (강남구 일부)
insert into kona_postal_codes (postal_code, dong_name)
values
  ('06210', '역삼동'),
  ('06211', '역삼동'),
  ('06212', '역삼동'),
  ('06213', '역삼동'),
  ('06214', '역삼동'),
  ('06220', '삼성동'),
  ('06230', '삼성동'),
  ('06240', '대치동'),
  ('06248', '역삼동'),
  ('06150', '삼성동'),
  ('06625', '역삼동');
