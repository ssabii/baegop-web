-- ============================================
-- 시드 데이터 (개발 환경 전용)
-- ⚠️ 반드시 001~004 실행 후 사용
-- ⚠️ prod 환경에서 절대 실행 금지
-- ============================================

-- 1. 테스트 유저 (auth.users → handle_new_user 트리거로 profiles 자동 생성)
insert into auth.users (instance_id, id, aud, role, email, encrypted_password, email_confirmed_at, created_at, updated_at, raw_user_meta_data)
values
  ('00000000-0000-0000-0000-000000000000', 'a1111111-1111-1111-1111-111111111111', 'authenticated', 'authenticated', 'alice@test.com', crypt('test1234', gen_salt('bf')), now(), now(), now(), '{"full_name": "김민지", "avatar_url": ""}'),
  ('00000000-0000-0000-0000-000000000000', 'b2222222-2222-2222-2222-222222222222', 'authenticated', 'authenticated', 'bob@test.com', crypt('test1234', gen_salt('bf')), now(), now(), now(), '{"full_name": "이준호", "avatar_url": ""}'),
  ('00000000-0000-0000-0000-000000000000', 'c3333333-3333-3333-3333-333333333333', 'authenticated', 'authenticated', 'carol@test.com', crypt('test1234', gen_salt('bf')), now(), now(), now(), '{"full_name": "박소연", "avatar_url": ""}'),
  ('00000000-0000-0000-0000-000000000000', 'd4444444-4444-4444-4444-444444444444', 'authenticated', 'authenticated', 'dave@test.com', crypt('test1234', gen_salt('bf')), now(), now(), now(), '{"full_name": "최우진", "avatar_url": ""}'),
  ('00000000-0000-0000-0000-000000000000', 'e5555555-5555-5555-5555-555555555555', 'authenticated', 'authenticated', 'eve@test.com', crypt('test1234', gen_salt('bf')), now(), now(), now(), '{"full_name": "정하늘", "avatar_url": ""}');

-- 2. 장소 (크몽 사무실 주변 역삼/삼성동 일대)
insert into places (id, name, category, address, lat, lng, kona_card_status, created_by)
values
  ('naver_001', '순남시래기', '음식점>한식', '서울특별시 강남구 테헤란로 330', 37.5065, 127.0535, 'available', 'a1111111-1111-1111-1111-111111111111'),
  ('naver_002', '리장마라탕', '음식점>중식', '서울특별시 강남구 역삼로 180', 37.5010, 127.0380, 'available', 'b2222222-2222-2222-2222-222222222222'),
  ('naver_003', '스시마이우', '음식점>일식', '서울특별시 강남구 테헤란로 322', 37.5063, 127.0525, 'unavailable', 'a1111111-1111-1111-1111-111111111111'),
  ('naver_004', '파스타가좋다', '음식점>양식', '서울특별시 강남구 역삼로 172', 37.5005, 127.0370, 'available', 'c3333333-3333-3333-3333-333333333333'),
  ('naver_005', '홍콩반점', '음식점>중식', '서울특별시 강남구 테헤란로 340', 37.5068, 127.0545, 'unknown', 'd4444444-4444-4444-4444-444444444444'),
  ('naver_006', '김밥천국 역삼점', '음식점>분식', '서울특별시 강남구 역삼로 160', 37.4998, 127.0365, 'available', 'b2222222-2222-2222-2222-222222222222'),
  ('naver_007', '써브웨이 역삼역점', '음식점>패스트푸드', '서울특별시 강남구 테헤란로 310', 37.5060, 127.0510, 'unavailable', 'e5555555-5555-5555-5555-555555555555'),
  ('naver_008', '본죽 삼성점', '음식점>한식', '서울특별시 강남구 삼성로 100', 37.5090, 127.0580, 'unknown', 'c3333333-3333-3333-3333-333333333333'),
  ('naver_009', '토끼정', '음식점>일식', '서울특별시 강남구 테헤란로 350', 37.5070, 127.0555, 'available', 'a1111111-1111-1111-1111-111111111111'),
  ('naver_010', '이디야 역삼역점', '음식점>카페,디저트', '서울특별시 강남구 역삼로 170', 37.5003, 127.0368, 'available', 'd4444444-4444-4444-4444-444444444444'),
  ('naver_011', '하남돼지집 역삼점', '음식점>한식', '서울특별시 강남구 테헤란로 315', 37.5062, 127.0515, 'available', 'b2222222-2222-2222-2222-222222222222'),
  ('naver_012', '맥도날드 역삼점', '음식점>패스트푸드', '서울특별시 강남구 역삼로 165', 37.5000, 127.0367, 'unavailable', 'e5555555-5555-5555-5555-555555555555'),
  ('naver_013', '오봉집', '음식점>한식', '서울특별시 강남구 테헤란로 360', 37.5072, 127.0560, 'available', 'c3333333-3333-3333-3333-333333333333'),
  ('naver_014', '모스버거 삼성점', '음식점>패스트푸드', '서울특별시 강남구 삼성로 110', 37.5092, 127.0585, 'unknown', 'a1111111-1111-1111-1111-111111111111'),
  ('naver_015', '미소야 역삼점', '음식점>일식', '서울특별시 강남구 역삼로 175', 37.5006, 127.0372, 'available', 'd4444444-4444-4444-4444-444444444444');

-- 3. 리뷰 (다양한 별점, 일부는 내용 없이 별점만)
insert into reviews (place_id, user_id, rating, content)
values
  -- 순남시래기
  ('naver_001', 'b2222222-2222-2222-2222-222222222222', 5, '시래기 된장찌개 진짜 맛있어요! 밥도 맛있고 반찬도 깔끔합니다.'),
  ('naver_001', 'c3333333-3333-3333-3333-333333333333', 4, '양도 많고 가성비 좋음'),
  ('naver_001', 'd4444444-4444-4444-4444-444444444444', 5, null),
  ('naver_001', 'e5555555-5555-5555-5555-555555555555', 4, '점심시간에 웨이팅이 좀 있지만 그만한 가치가 있습니다'),
  -- 리장마라탕
  ('naver_002', 'a1111111-1111-1111-1111-111111111111', 4, '마라탕 국물이 진하고 좋아요'),
  ('naver_002', 'c3333333-3333-3333-3333-333333333333', 3, '호불호 갈릴 수 있는 맛'),
  ('naver_002', 'e5555555-5555-5555-5555-555555555555', 5, null),
  -- 스시마이우
  ('naver_003', 'b2222222-2222-2222-2222-222222222222', 5, '런치 오마카세 퀄리티가 이 가격에? 대만족'),
  ('naver_003', 'd4444444-4444-4444-4444-444444444444', 4, '신선하고 좋았어요'),
  ('naver_003', 'e5555555-5555-5555-5555-555555555555', 5, '코나카드 안 되는 게 아쉽지만 맛은 최고'),
  -- 파스타가좋다
  ('naver_004', 'a1111111-1111-1111-1111-111111111111', 4, null),
  ('naver_004', 'b2222222-2222-2222-2222-222222222222', 3, '봉골레는 괜찮은데 로제는 별로'),
  ('naver_004', 'd4444444-4444-4444-4444-444444444444', 4, '분위기도 좋고 맛도 좋아요'),
  -- 홍콩반점
  ('naver_005', 'a1111111-1111-1111-1111-111111111111', 3, '짬뽕은 맛있는데 짜장은 그저 그래요'),
  ('naver_005', 'c3333333-3333-3333-3333-333333333333', 4, null),
  -- 김밥천국
  ('naver_006', 'a1111111-1111-1111-1111-111111111111', 3, '급할 때 가기 좋음'),
  ('naver_006', 'd4444444-4444-4444-4444-444444444444', 2, '위생이 좀...'),
  ('naver_006', 'e5555555-5555-5555-5555-555555555555', 3, null),
  -- 토끼정
  ('naver_009', 'b2222222-2222-2222-2222-222222222222', 5, '규동이 정말 맛있어요. 웨이팅 감수할 가치 있음!'),
  ('naver_009', 'c3333333-3333-3333-3333-333333333333', 4, '카레우동도 추천합니다'),
  ('naver_009', 'd4444444-4444-4444-4444-444444444444', 5, null),
  ('naver_009', 'e5555555-5555-5555-5555-555555555555', 4, '점심시간 피해서 가세요'),
  -- 하남돼지집
  ('naver_011', 'a1111111-1111-1111-1111-111111111111', 5, '회식 장소로 최고! 삼겹살 퀄리티 좋습니다'),
  ('naver_011', 'c3333333-3333-3333-3333-333333333333', 4, '고기 두께가 좋아요'),
  ('naver_011', 'e5555555-5555-5555-5555-555555555555', 5, null),
  -- 오봉집
  ('naver_013', 'b2222222-2222-2222-2222-222222222222', 4, '된장찌개가 집밥 느낌이라 좋아요'),
  ('naver_013', 'd4444444-4444-4444-4444-444444444444', 4, null),
  -- 미소야
  ('naver_015', 'a1111111-1111-1111-1111-111111111111', 4, '돈코츠 라멘 국물이 진해서 좋아요'),
  ('naver_015', 'b2222222-2222-2222-2222-222222222222', 5, '챠슈가 정말 부드럽습니다'),
  ('naver_015', 'c3333333-3333-3333-3333-333333333333', 3, '웨이팅이 너무 길어요');

-- 4. 좋아요/싫어요
insert into reactions (place_id, user_id, type)
values
  -- 순남시래기: 좋아요 4
  ('naver_001', 'a1111111-1111-1111-1111-111111111111', 'like'),
  ('naver_001', 'b2222222-2222-2222-2222-222222222222', 'like'),
  ('naver_001', 'c3333333-3333-3333-3333-333333333333', 'like'),
  ('naver_001', 'd4444444-4444-4444-4444-444444444444', 'like'),
  -- 리장마라탕: 좋아요 2, 싫어요 1
  ('naver_002', 'a1111111-1111-1111-1111-111111111111', 'like'),
  ('naver_002', 'c3333333-3333-3333-3333-333333333333', 'like'),
  ('naver_002', 'd4444444-4444-4444-4444-444444444444', 'dislike'),
  -- 스시마이우: 좋아요 3
  ('naver_003', 'a1111111-1111-1111-1111-111111111111', 'like'),
  ('naver_003', 'b2222222-2222-2222-2222-222222222222', 'like'),
  ('naver_003', 'e5555555-5555-5555-5555-555555555555', 'like'),
  -- 파스타가좋다: 좋아요 2
  ('naver_004', 'a1111111-1111-1111-1111-111111111111', 'like'),
  ('naver_004', 'c3333333-3333-3333-3333-333333333333', 'like'),
  -- 홍콩반점: 좋아요 1, 싫어요 2
  ('naver_005', 'c3333333-3333-3333-3333-333333333333', 'like'),
  ('naver_005', 'b2222222-2222-2222-2222-222222222222', 'dislike'),
  ('naver_005', 'e5555555-5555-5555-5555-555555555555', 'dislike'),
  -- 김밥천국: 싫어요 2
  ('naver_006', 'b2222222-2222-2222-2222-222222222222', 'dislike'),
  ('naver_006', 'c3333333-3333-3333-3333-333333333333', 'dislike'),
  -- 토끼정: 좋아요 5 (인기 맛집)
  ('naver_009', 'a1111111-1111-1111-1111-111111111111', 'like'),
  ('naver_009', 'b2222222-2222-2222-2222-222222222222', 'like'),
  ('naver_009', 'c3333333-3333-3333-3333-333333333333', 'like'),
  ('naver_009', 'd4444444-4444-4444-4444-444444444444', 'like'),
  ('naver_009', 'e5555555-5555-5555-5555-555555555555', 'like'),
  -- 하남돼지집: 좋아요 3
  ('naver_011', 'a1111111-1111-1111-1111-111111111111', 'like'),
  ('naver_011', 'b2222222-2222-2222-2222-222222222222', 'like'),
  ('naver_011', 'd4444444-4444-4444-4444-444444444444', 'like'),
  -- 미소야: 좋아요 3, 싫어요 1
  ('naver_015', 'a1111111-1111-1111-1111-111111111111', 'like'),
  ('naver_015', 'b2222222-2222-2222-2222-222222222222', 'like'),
  ('naver_015', 'd4444444-4444-4444-4444-444444444444', 'like'),
  ('naver_015', 'e5555555-5555-5555-5555-555555555555', 'dislike');

-- 5. 코나카드 투표 (트리거가 임계값 초과 시 상태 자동 변경)
insert into kona_card_votes (place_id, user_id, vote)
values
  -- 순남시래기: available 4표 → 자동으로 available 확정
  ('naver_001', 'b2222222-2222-2222-2222-222222222222', 'available'),
  ('naver_001', 'c3333333-3333-3333-3333-333333333333', 'available'),
  ('naver_001', 'd4444444-4444-4444-4444-444444444444', 'available'),
  ('naver_001', 'e5555555-5555-5555-5555-555555555555', 'available'),
  -- 스시마이우: unavailable 3표 → 자동으로 unavailable 확정
  ('naver_003', 'a1111111-1111-1111-1111-111111111111', 'unavailable'),
  ('naver_003', 'c3333333-3333-3333-3333-333333333333', 'unavailable'),
  ('naver_003', 'd4444444-4444-4444-4444-444444444444', 'unavailable'),
  -- 홍콩반점: available 1, unavailable 1 → 임계값 미달, 상태 유지
  ('naver_005', 'a1111111-1111-1111-1111-111111111111', 'available'),
  ('naver_005', 'b2222222-2222-2222-2222-222222222222', 'unavailable');
